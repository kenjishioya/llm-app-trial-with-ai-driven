# å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— â€“ QRAI MVP

> **ç›®çš„** â€” ã©ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã©ã®é †åºã§å®Ÿè£…ãƒ»ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã‹ã‚’ç¤ºã—ã€é–‹ç™ºã¨ã‚¤ãƒ³ãƒ•ãƒ©ä½œæ¥­ã‚’æ¼ã‚Œãªãé€²ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚å…·ä½“çš„ãªæ—¥ä»˜ã‚„ã‚¹ãƒ—ãƒªãƒ³ãƒˆé•·ã«ç¸›ã‚‰ã‚Œãšã€**ãƒ•ã‚§ãƒ¼ã‚ºå˜ä½**ã§å®Œäº†æ¡ä»¶ã‚’å®šç¾©ã™ã‚‹ã€‚å®Ÿè£…åŠ¹ç‡ã¨å“è³ªæ‹…ä¿ã‚’ä¸¡ç«‹ã™ã‚‹æ§‹æˆã§è¨­è¨ˆã€‚

---

## 0. ãƒ•ã‚§ãƒ¼ã‚ºæ¦‚è¦

| ãƒ•ã‚§ãƒ¼ã‚º                             | ã‚´ãƒ¼ãƒ«                                              | å®Œäº†åˆ¤å®š                                               |
| -------------------------------- | ------------------------------------------------- | -------------------------------------------------- |
| **Phase 0** â€“ åŸºç›¤ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— & CI/CD     | ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ + Azureç„¡æ–™æ ã‚¤ãƒ³ãƒ•ãƒ© + è‡ªå‹•åŒ–ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰           | `terraform apply` + `az deployment` å®Œäº† + GitHub Actions CIç·‘ + Dockerèµ·å‹•OK |
| **Phase 1** â€“ APIåŸºç›¤ + DB + RAG âœ…     | FastAPI + GraphQL + Cosmos DB + åŸºæœ¬RAG + ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ | GraphQL ask ã‚¯ã‚¨ãƒªæˆåŠŸ + ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜ç¢ºèª + pytestç·‘           |
| **Phase 1.5** â€“ æœ¬ç•ªé‹ç”¨æº–å‚™ âœ…           | ãƒ†ã‚¹ãƒˆç’°å¢ƒåˆ†é›¢ + CI/CDåŸºç›¤ + ç’°å¢ƒè¨­å®šå¼·åŒ–                   | ãƒ†ã‚¹ãƒˆDBåˆ†é›¢ + GitHub Actionsç·‘ + ç’°å¢ƒå¤‰æ•°ç®¡ç†              |
| **Phase 2** â€“ UI + ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚° âœ…        | Next.js ãƒãƒ£ãƒƒãƒˆ UI + SSE ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚° + çµ±åˆãƒ†ã‚¹ãƒˆ           | ãƒ–ãƒ©ã‚¦ã‚¶è³ªå•â†’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¿œç­”è¡¨ç¤º + ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆç·‘ + â¸ï¸E2Eä¿ç•™       |
| **Phase 3** â€“ RAGã®Azure AI Searchçµ±åˆ   | Azure AI Searchçµ±åˆ + ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ + æ¤œç´¢æ©Ÿèƒ½å¼·åŒ–      | AI SearchçµŒç”±ã§ã®RAGæ¤œç´¢ + ãƒ†ã‚¹ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ¤œç´¢ç¢ºèª            |
| **Phase 4** â€“ Deep Research       | å¤šæ®µéšãƒªã‚µãƒ¼ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ + é€²æ—è¡¨ç¤º + æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ                  | `deepResearch=true` ã§æ§‹é€ åŒ–ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ + æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆç·‘          |
| **Phase 5** â€“ UIæ”¹å–„ã¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†        | UI/UXæ”¹å–„ + ã‚»ãƒƒã‚·ãƒ§ãƒ³å±¥æ­´ + E2Eãƒ†ã‚¹ãƒˆæ‹¡å¼µ                   | ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†å…¨æ©Ÿèƒ½ + æ”¹å–„ã•ã‚ŒãŸUI + E2Eãƒ†ã‚¹ãƒˆç·‘               |

è©³ç´°ãªç›£è¦–ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­å®šã«ã¤ã„ã¦ã¯ **[architecture/performance_monitoring.md](architecture/performance_monitoring.md)** ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

è©³ç´°ãªã‚³ã‚¹ãƒˆç®¡ç†æˆ¦ç•¥ãƒ»äºˆç®—è¨­å®šãƒ»æœ€é©åŒ–æ‰‹æ³•ã«ã¤ã„ã¦ã¯ **[architecture/cost_management.md](architecture/cost_management.md)** ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## 1. è©³ç´°ã‚¿ã‚¹ã‚¯ãƒãƒƒã‚¯ãƒ­ã‚°

### Phase 0: åŸºç›¤ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— & CI/CD

#### 1-0A ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ï¼ˆTerraformï¼‰
* [x] **Terraform backend**: Azure Blob Storage + state lockè¨­å®š
* [x] **Cosmos DB for PostgreSQL**: Single nodeç„¡æ–™æ ã€ãƒ†ãƒ¼ãƒ–ãƒ«åˆæœŸåŒ– âœ… **ä¿®æ­£å®Œäº†**
* [x] **Container Apps Environment**: Consumption planã€ç’°å¢ƒå¤‰æ•°ç®¡ç† âœ… **ä¿®æ­£å®Œäº†**
* [x] **Azure Cost Management Budget**: $5äºˆç®— + 80%ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š âœ… **ä¿®æ­£å®Œäº†**
* [x] **Log Analytics Workspace**: OpenTelemetry DCRè¨­å®š âœ… **ä¿®æ­£å®Œäº†**
* [x] **Terraformè¨­å®šä¿®æ­£**: Azure OpenAIä¾å­˜é™¤å»ã€LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¯¾å¿œ âœ… **å®Œäº†**

#### 1-0B ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ï¼ˆBicepï¼‰
* [x] **Azure AI Search F1**: ãƒªã‚½ãƒ¼ã‚¹ä½œæˆã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ACLè¨­å®š âœ… **ãƒ†ã‚¹ãƒˆæ¸ˆã¿**
* [x] **Key Vault**: LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼APIã‚­ãƒ¼å®‰å…¨ç®¡ç†ã€ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡è¨­å®š âœ… **ãƒ†ã‚¹ãƒˆæ¸ˆã¿**
* [x] **Static Web Apps**: Next.js ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç”¨ã€GitHubé€£æºè¨­å®š âœ… **ãƒ†ã‚¹ãƒˆæ¸ˆã¿**

#### 1-0C LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¨­å®šï¼ˆAzure OpenAI â†’ OpenRouter/Google AIç§»è¡Œï¼‰
* [x] **LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¨­å®š**: OpenRouterï¼ˆãƒ—ãƒ©ã‚¤ãƒãƒªï¼‰+ Google AI Studioï¼ˆã‚»ã‚«ãƒ³ãƒ€ãƒªï¼‰
* [x] **APIã‚­ãƒ¼ç®¡ç†**: Key Vaultçµ±åˆã€ã‚»ã‚­ãƒ¥ã‚¢ç’°å¢ƒå¤‰æ•°ç®¡ç†
* [x] **LangChainè¨­å®š**: config/llm_providers.ymlã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼æŠ½è±¡åŒ–è¨­å®š
* [x] **ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: scripts/deploy-llm-providers.shã€check/test ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

#### 1-0D CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
* [ ] **GitHub Actions**: pytest + eslint + terraform validation + bicep validation
* [ ] **Pre-commit hooks**: black, ruff, prettier, detect-secrets
* [ ] **Docker Compose**: é–‹ç™ºç’°å¢ƒçµ±åˆã€ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰è¨­å®šã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®š
* [ ] **ç’°å¢ƒå¤‰æ•°ç®¡ç†**: .env.sampleä½œæˆã€GitHub Secretsè¨­å®š

**Phase 0 å®Œäº†æ¡ä»¶**:
```bash
# Bicepãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸï¼ˆLLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¯¾å¿œç‰ˆï¼‰
az deployment group create --resource-group qrai-rg-dev \
  --template-file infra/bicep/main.bicep \
  --parameters @infra/bicep/main.bicepparam \
  --parameters openRouterApiKey='sk-or-xxx' googleAiApiKey='AIzaSyxxx'

# Terraformãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸï¼ˆBicepå‡ºåŠ›ã‚’ä½¿ç”¨ï¼‰
cd infra/terraform
terraform apply -auto-approve

# LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼æ¥ç¶šç¢ºèª
python scripts/check_llm_config.py  # å…¨ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ç·‘

# é–‹ç™ºç’°å¢ƒèµ·å‹•ç¢ºèª
docker compose up --build
curl http://localhost:8000/health  # 200 OK

# CIæˆåŠŸ
git push origin main  # GitHub Actions ç·‘
```

---

### Phase 1: APIåŸºç›¤ + DB + RAG âœ… **å®Œäº†**

#### 1-1A ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤ âœ…
* [x] **FastAPI application factory**: main.py + config.py + health endpoint
* [x] **Strawberry GraphQL schema**: Query/Mutation typeså®šç¾©ã€å‹å®‰å…¨æ€§ç¢ºä¿
* [x] **ä¾å­˜æ³¨å…¥ã‚·ã‚¹ãƒ†ãƒ **: deps.pyã€DB/Search/LLM ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç®¡ç†
* [x] **ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢**: CORSã€Rate Limit (slowapi 20 RPS/IP)ã€æ§‹é€ åŒ–ãƒ­ã‚°
* [x] **SQLAlchemy async engine**: SQLite+aiosqliteæ¥ç¶šã€Alembic migrationåˆæœŸåŒ–

#### 1-1B RAG ã‚µãƒ¼ãƒ“ã‚¹ âœ…
* [x] **LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼æŠ½è±¡åŒ–**: OpenRouter/Google AIçµ±åˆã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
* [x] **LLM ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**: async/awaitã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
* [x] **RagServiceå®Ÿè£…**: search â†’ prompt build â†’ generate â†’ citation format
* [x] **GraphQL ask resolver**: è³ªå•å—ä¿¡ â†’ RAGå®Ÿè¡Œ â†’ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­”è¿”å´

#### 1-1C ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ âœ…
* [x] **ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ**: sessions, messages, research_notes
* [x] **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿å­˜ã€åŸºæœ¬çš„ãªCRUD
* [x] **Session-Messageé–¢ä¿‚**: include_messagesã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€è©³ç´°å–å¾—æ©Ÿèƒ½

#### 1-1D ãƒ†ã‚¹ãƒˆå®Ÿè£… âœ…
* [x] **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**: pytest + TestClientã€RAGæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ (100%æˆåŠŸ)
* [x] **ãƒ¢ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ**: LLM API ã®ãƒ¢ãƒƒã‚¯åŒ–ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
* [x] **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿å­˜ãƒ†ã‚¹ãƒˆ
* [x] **çµ±åˆãƒ†ã‚¹ãƒˆ**: GraphQLçµŒç”±ã§ã®APIå‹•ä½œç¢ºèªã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ©Ÿèƒ½ç¢ºèª

**Phase 1 å®Œäº†æ¡ä»¶**: âœ… **å…¨ã¦é”æˆ**
```bash
# GraphQL ask ã‚¯ã‚¨ãƒªæˆåŠŸ âœ…
curl -X POST http://localhost:8000/graphql \
  -H "Content-Type: application/json" \
  -d '{"query":"mutation { ask(input: { question: \"çµ±åˆãƒ†ã‚¹ãƒˆã®è³ªå•ã§ã™\", sessionId: \"...\", deepResearch: false }) { sessionId messageId stream } }"}'

# ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜ç¢ºèª âœ…
# SQLite+aiosqlite ã§æ­£å¸¸å‹•ä½œç¢ºèªæ¸ˆã¿

# ãƒ†ã‚¹ãƒˆæˆåŠŸ âœ…
cd backend && pytest tests/ -v  # 18/18 ãƒ†ã‚¹ãƒˆæˆåŠŸã€69%ã‚«ãƒãƒ¬ãƒƒã‚¸é”æˆ

# ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ©Ÿèƒ½ç¢ºèª âœ…
curl -N "http://localhost:8000/graphql/stream?id=<messageId>"  # SSEé…ä¿¡æˆåŠŸ

# ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæº–æ‹ ç¢ºèª âœ…
# AskPayloadå‹ã€/graphql/stream SSE endpointã€LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼æŠ½è±¡åŒ– - å…¨ã¦å®Ÿè£…æ¸ˆã¿
```

**ğŸ† Phase 1 é”æˆé …ç›®**:
- âœ… **GraphQL APIåŸºç›¤**: å®Œå…¨å®Ÿè£…ãƒ»çµ±åˆãƒ†ã‚¹ãƒˆæˆåŠŸ
- âœ… **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ©Ÿèƒ½**: SSE ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…
- âœ… **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç®¡ç†æ©Ÿèƒ½
- âœ… **LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼**: æŠ½è±¡åŒ–ãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ»ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
- âœ… **ãƒ†ã‚¹ãƒˆå“è³ª**: 100%æˆåŠŸç‡ãƒ»69%ã‚«ãƒãƒ¬ãƒƒã‚¸
- âœ… **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæº–æ‹ **: APIä»•æ§˜ãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ•´åˆæ€§ç¢ºä¿

**ğŸ¯ Phase 1å®Œäº†ã«ã‚ˆã‚Šã€APIãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨RAGæ©Ÿèƒ½ãŒå®Œå…¨ã«å‹•ä½œå¯èƒ½ã«ãªã‚Šã¾ã—ãŸï¼**

---

### Phase 1.5: æœ¬ç•ªé‹ç”¨æº–å‚™ âœ… **å®Œäº†**

#### 1-1.5A ãƒ†ã‚¹ãƒˆç’°å¢ƒæ”¹å–„ âœ…
* [x] **ãƒ†ã‚¹ãƒˆåˆ†é›¢**: in-memory SQLite (`sqlite:///:memory:`)ã€ãƒ†ã‚¹ãƒˆå°‚ç”¨DB
* [x] **ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£æ”¹å–„**: å„ãƒ†ã‚¹ãƒˆå¾Œã«è‡ªå‹•ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
* [x] **ãƒ¢ãƒƒã‚¯LLM**: ãƒ†ã‚¹ãƒˆæ™‚ã¯å®Ÿéš›ã®APIå‘¼ã³å‡ºã—å›é¿ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹å›ºå®š
* [x] **ãƒ†ã‚¹ãƒˆã‚«ãƒ†ã‚´ãƒªåˆ†é›¢**: unit/integration/e2eæ˜ç¢ºåŒ–

#### 1-1.5B ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ¬ç•ªæº–å‚™ âœ…
* [x] **PostgreSQLçµ±åˆ**: é–‹ç™ºç’°å¢ƒã®Docker PostgreSQLä½¿ç”¨
* [x] **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ¤œè¨¼**: Alembicæœ¬ç•ªé‹ç”¨ãƒ†ã‚¹ãƒˆ
* [x] **æ¥ç¶šãƒ—ãƒ¼ãƒ«**: SQLAlchemy async poolè¨­å®š
* [x] **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥**: pg_dumpè‡ªå‹•åŒ–ã€å¾©æ—§æ‰‹é †

#### 1-1.5C CI/CDå®Ÿè£… âœ…
* [x] **GitHub Actions**: pytest, ruff, black, isortè‡ªå‹•å®Ÿè¡Œ
* [x] **Pre-commit hooks**: ã‚³ãƒŸãƒƒãƒˆå‰å“è³ªãƒã‚§ãƒƒã‚¯
* [x] **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³**: bandit, safetyå®Ÿè¡Œ
* [x] **ã‚«ãƒãƒ¬ãƒƒã‚¸å¼·åˆ¶**: 80%æœªæº€ã§CIå¤±æ•—

#### 1-1.5D ç’°å¢ƒè¨­å®šå¼·åŒ– âœ…
* [x] **.envç®¡ç†**: .env.sampleä½œæˆã€æœ¬ç•ªã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆåˆ†é›¢
* [x] **è¨­å®šæ¤œè¨¼**: èµ·å‹•æ™‚ç’°å¢ƒå¤‰æ•°ãƒã‚§ãƒƒã‚¯ã€å¿…é ˆé …ç›®ç¢ºèª
* [x] **Key Vaultçµ±åˆ**: Azure Key Vaultæ¥ç¶šãƒ†ã‚¹ãƒˆ
* [x] **ãƒ­ã‚°è¨­å®š**: æ§‹é€ åŒ–ãƒ­ã‚°ã€æœ¬ç•ªãƒ­ã‚°ãƒ¬ãƒ™ãƒ«èª¿æ•´

**Phase 1.5 å®Œäº†æ¡ä»¶**: âœ… **å…¨ã¦é”æˆ**
```bash
# ãƒ†ã‚¹ãƒˆç’°å¢ƒåˆ†é›¢ç¢ºèª âœ…
cd backend && pytest tests/ --create-db  # å°‚ç”¨DBã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã€å®Ÿè¡Œå¾Œè‡ªå‹•å‰Šé™¤
# âœ… ãƒ†ã‚¹ãƒˆDBåˆ†é›¢ã€è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
# âœ… ãƒ¢ãƒƒã‚¯LLMä½¿ç”¨ã€å®Ÿéš›ã®APIå‘¼ã³å‡ºã—å›é¿
# âœ… unit/integrationåˆ†é›¢

# CI/CDç¢ºèª âœ…
git push origin main  # GitHub Actionsç·‘ã€ã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Š

# PostgreSQLç¢ºèª âœ…
docker-compose -f docker-compose.yml up postgres
python scripts/test_postgres_connection.py  # æ¥ç¶šæˆåŠŸ

# ç’°å¢ƒè¨­å®šç¢ºèª âœ…
python scripts/validate_env.py  # å…¨å¿…é ˆç’°å¢ƒå¤‰æ•°ç¢ºèª
```

---

### Phase 2: UI + ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚° âœ… **å®Œäº†**

#### 1-2A ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰åŸºç›¤ âœ…
* [x] **Next.js 14 App Router**: åˆæœŸåŒ–ã€TypeScriptè¨­å®šã€Tailwind CSS
* [x] **shadcn/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: Button, Card, Input, Textareaå°å…¥
* [x] **GraphQL Code Generator**: TypeScript hooksè‡ªå‹•ç”Ÿæˆã€å‹å®‰å…¨æ€§ç¢ºä¿
* [x] **Apollo Clientè¨­å®š**: GraphQLã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

#### 1-2B ãƒãƒ£ãƒƒãƒˆ UI âœ…
* [x] **ChatWindow ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´è¡¨ç¤ºã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åˆ¶å¾¡
* [x] **MessageBubble ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼/AI ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€å¼•ç”¨ãƒªãƒ³ã‚¯è¡¨ç¤º
* [x] **InputForm ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: è³ªå•å…¥åŠ›ã€é€ä¿¡ãƒœã‚¿ãƒ³ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
* [x] **LoadingSpinner**: å¿œç­”å¾…ã¡çŠ¶æ…‹è¡¨ç¤º

#### 1-2C ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å®Ÿè£… âœ…
* [x] **SSE ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**: EventSource APIçµ±åˆã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å—ä¿¡
* [x] **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°è¡¨ç¤º**: ãƒãƒ£ãƒ³ã‚¯å—ä¿¡ â†’ æ®µéšçš„ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤º
* [x] **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: æ¥ç¶šåˆ‡æ–­ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€å†æ¥ç¶šå‡¦ç†

#### 1-2D çµ±åˆãƒ†ã‚¹ãƒˆ âœ…
* [x] **Vitestè¨­å®š**: React Testing Libraryã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã€76ãƒ†ã‚¹ãƒˆå…¨æˆåŠŸ
* â¸ï¸ **E2E ãƒ†ã‚¹ãƒˆåŸºç›¤**: Playwrightè¨­å®šã€åŸºæœ¬ãƒ•ãƒ­ãƒ¼ï¼ˆè³ªå•â†’å¿œç­”ï¼‰ãƒ†ã‚¹ãƒˆï¼ˆä¿ç•™ä¸­ï¼‰

#### 1-2E ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ»ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ âœ…
* [x] **Sidebar ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: ã‚»ãƒƒã‚·ãƒ§ãƒ³å±¥æ­´è¡¨ç¤ºã€æ–°è¦ãƒãƒ£ãƒƒãƒˆä½œæˆã€å‰Šé™¤æ©Ÿèƒ½
* [x] **AppLayoutçµ±åˆ**: SessionProviderã€ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
* [x] **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**: useChatSessionãƒ•ãƒƒã‚¯ã€CRUDæ“ä½œã€å®Œå…¨çµ±åˆ

**Phase 2 å®Œäº†æ¡ä»¶**: âœ… **å…¨ã¦é”æˆ**
```bash
# ãƒ–ãƒ©ã‚¦ã‚¶ã‚¢ã‚¯ã‚»ã‚¹ç¢ºèª âœ…
open http://localhost:3000
# âœ… http://localhost:3000/chat ã§è³ªå•é€ä¿¡ãƒ»AIå¿œç­”è¡¨ç¤º
# âœ… ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­”ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º
# âœ… ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†æ©Ÿèƒ½ï¼ˆä½œæˆãƒ»å±¥æ­´ãƒ»å‰Šé™¤ãƒ»å¾©å…ƒï¼‰

â¸ï¸ # E2E ãƒ†ã‚¹ãƒˆæˆåŠŸï¼ˆä¿ç•™ä¸­ï¼‰
â¸ï¸ npx playwright test tests/e2e/basic-chat.spec.ts

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆæˆåŠŸ âœ…
npm test  # 76ãƒ†ã‚¹ãƒˆå…¨æˆåŠŸã€é«˜ã‚«ãƒãƒ¬ãƒƒã‚¸é”æˆ
```

**ğŸ† Phase 2 é”æˆé …ç›®**:
- âœ… **å®Œå…¨ãªãƒãƒ£ãƒƒãƒˆUI**: Next.js 14 + TypeScript + shadcn/ui
- âœ… **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°**: SSEçµ±åˆã€æ®µéšçš„å¿œç­”è¡¨ç¤º
- âœ… **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**: ã‚µã‚¤ãƒ‰ãƒãƒ¼ã€å±¥æ­´è¡¨ç¤ºã€CRUDæ“ä½œ
- âœ… **GraphQLçµ±åˆ**: å‹å®‰å…¨ãªAPIå‘¼ã³å‡ºã—ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- âœ… **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ**: 76ãƒ†ã‚¹ãƒˆå…¨æˆåŠŸã€é«˜ã‚«ãƒãƒ¬ãƒƒã‚¸
- â¸ï¸ **E2Eãƒ†ã‚¹ãƒˆ**: å®Ÿè£…æ¸ˆã¿ã€å®Ÿè¡Œãƒ»ãƒ‡ãƒãƒƒã‚°ã¯æ¬¡æ®µéšã§å¯¾å¿œ

---

### Phase 3: RAGã®Azure AI Searchçµ±åˆ

#### 1-3A Azure AI Search çµ±åˆåŸºç›¤
* [ ] **SearchServiceçµ±åˆ**: Azure AI Search ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
* [ ] **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ‘ãƒ¼ã‚µãƒ¼**: PDF, DOCX, TXTå¯¾å¿œã€ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºæ©Ÿèƒ½
* [ ] **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç®¡ç†**: ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒãƒƒãƒ”ãƒ³ã‚°ã€ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼è¨­å®š
* [ ] **æ¤œç´¢æ©Ÿèƒ½çµ±åˆ**: æ—¢å­˜RAGServiceã¨AI Searchçµ±åˆã€ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢å¯¾å¿œ

#### 1-3B ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»å‡¦ç†æ©Ÿèƒ½
* [ ] **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸çµ±åˆ**: Azure Blob Storageã€åŸºæœ¬çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
* [ ] **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‡¦ç†API**: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
* [ ] **ãƒãƒ£ãƒ³ã‚¯å‡¦ç†**: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåˆ†å‰²ã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä»˜ä¸ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æŠ•å…¥
* [ ] **æ‰‹å‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: Azure Portal/CLIçµŒç”±ã§ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ‰‹é †

#### 1-3C ãƒ†ã‚¹ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæº–å‚™ãƒ»æ¤œè¨¼
* [ ] **ãƒ†ã‚¹ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåé›†**: æŠ€è¡“è³‡æ–™ã€FAQã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ç­‰ã®ã‚µãƒ³ãƒ—ãƒ«æº–å‚™
* [ ] **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æŠ•å…¥**: ãƒ†ã‚¹ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åŒ–
* [ ] **æ¤œç´¢å“è³ªæ¤œè¨¼**: æ¤œç´¢ç²¾åº¦ãƒ†ã‚¹ãƒˆã€é–¢é€£æ€§ã‚¹ã‚³ã‚¢ã€å¼•ç”¨æ©Ÿèƒ½ç¢ºèª
* [ ] **çµ±åˆãƒ†ã‚¹ãƒˆ**: RAGæ©Ÿèƒ½ã¨AI Searchçµ±åˆã®å‹•ä½œç¢ºèª

**Phase 3 å®Œäº†æ¡ä»¶**:
```bash
# Azure AI Search æ¥ç¶šç¢ºèª
curl http://localhost:8000/graphql -d '{"query":"query{searchDocuments(query:\"ãƒ†ã‚¹ãƒˆ\"){id title content score}}"}'

# ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç¢ºèª
curl -X POST http://localhost:8000/graphql/upload \
  -F "file=@test-document.pdf" \
  -F "metadata={\"title\":\"ãƒ†ã‚¹ãƒˆæ–‡æ›¸\",\"category\":\"manual\"}"

# RAGæ¤œç´¢å“è³ªç¢ºèª
# AI SearchçµŒç”±ã§ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ¤œç´¢ + LLMå›ç­”ç”Ÿæˆ
# å¼•ç”¨ãƒªãƒ³ã‚¯ã€é–¢é€£æ€§ã‚¹ã‚³ã‚¢è¡¨ç¤ºç¢ºèª
```

---

### Phase 4: Deep Research

#### 1-4A Deep Research ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
* [ ] **Plannerå®Ÿè£…**: è³ªå•åˆ†æã€ã‚µãƒ–ã‚¯ã‚¨ãƒªç”Ÿæˆæˆ¦ç•¥
* [ ] **SearchTool**: è¤‡æ•°æ¤œç´¢å®Ÿè¡Œã€çµæœçµ±åˆã€é‡è¤‡é™¤å»
* [ ] **Summarizer**: æ¤œç´¢çµæœè¦ç´„ã€æ§‹é€ åŒ–ã€å¼•ç”¨ä¿æŒ
* [ ] **Writer**: æœ€çµ‚ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã€Markdownæ§‹é€ åŒ–ã€ç« ç«‹ã¦

#### 1-4B é€²æ—è¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ 
* [ ] **ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹API**: SSE ã«ã‚ˆã‚‹é€²æ—é€šçŸ¥ã€ã‚¹ãƒ†ãƒƒãƒ—æƒ…å ±é€ä¿¡
* [ ] **ProgressBar ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: "Step 2/4: Searching..." è¡¨ç¤º
* [ ] **ç ”ç©¶ãƒãƒ¼ãƒˆä¿å­˜**: research_notes ãƒ†ãƒ¼ãƒ–ãƒ«ã€ä¸­é–“çµæœä¿å­˜

#### 1-4C Deep Research UI
* [ ] **Deep Research ãƒœã‚¿ãƒ³**: ãƒãƒ£ãƒƒãƒˆç”»é¢ã«ãƒœã‚¿ãƒ³è¿½åŠ 
* [ ] **é€²æ—è¡¨ç¤º**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—ã€ã‚¹ãƒ†ãƒƒãƒ—è©³ç´°è¡¨ç¤º
* [ ] **ãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤º**: æ§‹é€ åŒ–è¡¨ç¤ºã€å¼•ç”¨ãƒªãƒ³ã‚¯ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½

#### 1-4D æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
* [ ] **Deep Research çµ±åˆãƒ†ã‚¹ãƒˆ**: å…¨ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œã€ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆç¢ºèª
* [ ] **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**: 120ç§’ä»¥å†…å®Œäº†ç¢ºèª
* [ ] **ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ**: é€”ä¸­å¤±æ•—ã€éƒ¨åˆ†çµæœè¡¨ç¤º

**Phase 4 å®Œäº†æ¡ä»¶**:
```bash
# Deep Research å®Ÿè¡Œç¢ºèª
curl -X POST http://localhost:8000/graphql \
  -d '{"query":"mutation{startDeepResearch(sessionId:\"...\", question:\"ç«¶åˆåˆ†æãƒ¬ãƒãƒ¼ãƒˆ\"){id}}"}'

# æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆæˆåŠŸ
cd backend && pytest tests/test_deep_research.py::test_full_research_flow

# ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆç¢ºèªï¼ˆ120ç§’ä»¥å†…ï¼‰
```

---

### Phase 5: UIæ”¹å–„ã¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

#### 1-5A UI/UXæ”¹å–„
* [ ] **ãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡ç¤ºã«ã‚ˆã‚‹æ”¹å–„**: å…·ä½“çš„ãªæ”¹å–„é …ç›®ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®æŒ‡ç¤ºã«åŸºã¥ã„ã¦å®Ÿæ–½
* [ ] **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**: å¿…è¦ã«å¿œã˜ã¦ãƒ¢ãƒã‚¤ãƒ«ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆæœ€é©åŒ–
* [ ] **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ**: å¿…è¦ã«å¿œã˜ã¦WAI-ARIAæº–æ‹ ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ
* [ ] **ãƒ‡ã‚¶ã‚¤ãƒ³èª¿æ•´**: å¿…è¦ã«å¿œã˜ã¦ãƒ†ãƒ¼ãƒãƒ»ã‚«ãƒ©ãƒ¼ãƒ»ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´

#### 1-5B ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†æ©Ÿèƒ½æ‹¡å¼µ
* [ ] **ã‚»ãƒƒã‚·ãƒ§ãƒ³ CRUD API**: ä¸€è¦§å–å¾—ã€è©³ç´°å–å¾—ã€å‰Šé™¤ã€æ›´æ–°ã€ã‚¿ã‚¤ãƒˆãƒ«ç·¨é›†
* [ ] **GraphQL sessions resolver**: å±¥æ­´å–å¾—ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€ã‚½ãƒ¼ãƒˆã€æ¤œç´¢æ©Ÿèƒ½
* [ ] **ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©å…ƒæ©Ÿèƒ½**: éå»ãƒãƒ£ãƒƒãƒˆå¾©å…ƒã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´è¡¨ç¤ºã€ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯
* [ ] **å±¥æ­´UIæ”¹å–„**: SessionListå¼·åŒ–ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆã€å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°

#### 1-5C å“è³ªä¿è¨¼ãƒ»ãƒ†ã‚¹ãƒˆ
* [ ] **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãƒ†ã‚¹ãƒˆ**: åŸºæœ¬çš„ãªæ©Ÿèƒ½å‹•ä½œç¢ºèªï¼ˆä½œæˆãƒ»å‰Šé™¤ãƒ»åˆ‡ã‚Šæ›¿ãˆï¼‰
* [ ] **UIå‹•ä½œãƒ†ã‚¹ãƒˆ**: ã‚µã‚¤ãƒ‰ãƒãƒ¼æ“ä½œã€å±¥æ­´è¡¨ç¤ºã®å‹•ä½œç¢ºèª
* [ ] **çµ±åˆãƒ†ã‚¹ãƒˆ**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰çµ±åˆå‹•ä½œç¢ºèª

**Phase 5 å®Œäº†æ¡ä»¶**:
```bash
# ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†å…¨æ©Ÿèƒ½ç¢ºèª
curl http://localhost:8000/graphql -d '{"query":"query{sessions{id title createdAt}}"}'

# UIæ”¹å–„ç¢ºèªï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡ç¤ºã«ã‚ˆã‚‹æ”¹å–„é …ç›®ï¼‰
# ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®å‹•ä½œç¢ºèª
open http://localhost:3000

# çµ±åˆãƒ†ã‚¹ãƒˆæˆåŠŸ
npm test  # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
cd backend && pytest tests/  # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
```

---

---

## ğŸ“ éæ©Ÿèƒ½è¦ä»¶ãƒ¡ãƒ¢ï¼ˆå°†æ¥å¯¾å¿œäºˆå®šï¼‰

> **æ³¨æ„**: ä»¥ä¸‹ã®éæ©Ÿèƒ½è¦ä»¶ã¯ç¾åœ¨ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã‹ã‚‰å¤–ã—ã¦ã„ã¾ã™ãŒã€æœ¬ç•ªé‹ç”¨æ™‚ã«ã¯æ¤œè¨ãŒå¿…è¦ãªé …ç›®ã§ã™ã€‚

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ & å¯è¦³æ¸¬æ€§
#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
* **Locust ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: 5ãƒ¦ãƒ¼ã‚¶ãƒ¼ Ã— 5åˆ†è² è·ã‚·ãƒŠãƒªã‚ª
* **ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·æ¸¬å®š**: RAGå¿œç­” p95 < 10ç§’ã€Deep Research < 120ç§’
* **ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆæ¸¬å®š**: 20 RPSç›®æ¨™ã€QPSåˆ¶é™ãƒ†ã‚¹ãƒˆ

#### ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 
* **OpenTelemetryçµ±åˆ**: fastapi-opentelemetryã€åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚¹
* **æ§‹é€ åŒ–ãƒ­ã‚°**: structlogã€session_id/trace_idé€£æº
* **ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹**: Tokenä½¿ç”¨é‡ã€æ¤œç´¢å›æ•°ã€ã‚¨ãƒ©ãƒ¼ç‡

#### Azure Monitor çµ±åˆ
* **Log Analytics ã‚¯ã‚¨ãƒª**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æã€ã‚¨ãƒ©ãƒ¼æ¤œå‡º
* **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä½œæˆ**: ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã€ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã€ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨ç‡
* **ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š**: SLAé•åã€ç•°å¸¸æ¤œå‡ºã€é€šçŸ¥è¨­å®š

### é‹ç”¨æº–å‚™ & ã‚³ã‚¹ãƒˆã‚¬ãƒ¼ãƒ‰
#### ã‚³ã‚¹ãƒˆç®¡ç†
* **Budget ã‚¢ãƒ©ãƒ¼ãƒˆ**: Azure Cost Managementã€$5äºˆç®—80%é€šçŸ¥
* **ã‚³ã‚¹ãƒˆç›£è¦–**: Tokenä½¿ç”¨é‡è¿½è·¡ã€AI Searchå®¹é‡ç›£è¦–
* **æœ€é©åŒ–å®Ÿè£…**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆçŸ­ç¸®ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åœ§ç¸®

#### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— & å¾©æ—§
* **ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: pg_dumpè‡ªå‹•åŒ–ã€AI Searchã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
* **ç½å®³å¾©æ—§æ‰‹é †**: Runbookä½œæˆã€å¾©æ—§ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆ
* **éšœå®³æ¼”ç¿’**: AI Searchåœæ­¢ã€OpenAIåˆ¶é™ã€DBæ¥ç¶šå¤±æ•—å¯¾å¿œ

#### é‹ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
* **Runbookå®Œæˆ**: operational_runbook.mdå®Ÿè£…æ¤œè¨¼
* **ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ³•ã¾ã¨ã‚
* **ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°æˆ¦ç•¥**: ç„¡æ–™æ â†’æœ‰æ–™æ ç§»è¡Œè¨ˆç”»

---

## 2. å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ (Definition of Done)

### ğŸ¯ æœ€çµ‚MVPå®Œäº†æ¡ä»¶

* [ ] `docker compose up` ã§ãƒ­ãƒ¼ã‚«ãƒ«èµ·å‹•ã— UI ã§è³ªå•â†’å›ç­”ï¼ˆ5åˆ†ä»¥å†…ï¼‰
* [ ] GitHub Actions CI ç·‘ï¼ˆunit, integration, lintï¼‰
* [ ] Azure AI Searchçµ±åˆï¼šãƒ†ã‚¹ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ¤œç´¢â†’RAGå›ç­”ç”Ÿæˆ
* [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼šPDF/DOCXâ†’AI Search ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æŠ•å…¥
* [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ï¼šä½œæˆãƒ»ä¸€è¦§ãƒ»å‰Šé™¤ãƒ»å¾©å…ƒãƒ»å±¥æ­´è¡¨ç¤ºãŒå‹•ä½œ
* [ ] Deep Researchï¼šã€Œç«¶åˆåˆ†æã€ã§æ§‹é€ åŒ–ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆï¼ˆ120ç§’ä»¥å†…ï¼‰
* [ ] UIæ”¹å–„ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡ç¤ºã«ã‚ˆã‚‹æ”¹å–„é …ç›®ã®å®Ÿè£…å®Œäº†
* [ ] README ã§ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ‰€è¦æ™‚é–“ â‰¤ 15minï¼ˆå®Ÿæ¸¬ï¼‰

### ğŸ“‹ å“è³ªã‚²ãƒ¼ãƒˆ

| ã‚«ãƒ†ã‚´ãƒª       | æŒ‡æ¨™                              | ç›®æ¨™å€¤           |
| ---------- | ------------------------------- | ------------- |
| **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸** | Backend pytest line coverage   | > 80%         |
|            | Frontend Vitest coverage       | > 70%         |
| **æ©Ÿèƒ½å“è³ª**    | RAGå¿œç­”æ™‚é–“                        | < 30ç§’         |
|            | Deep Researchå®Œäº†æ™‚é–“              | < 120ç§’        |
|            | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ¤œç´¢ç²¾åº¦                     | é–¢é€£æ€§ã‚¹ã‚³ã‚¢ > 0.7  |
| **å¯ç”¨æ€§**     | E2E ãƒ†ã‚¹ãƒˆæˆåŠŸç‡                     | 100%          |
| **ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£** | UIæ”¹å–„é …ç›®ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡ç¤ºï¼‰            | æŒ‡ç¤ºé€šã‚Šå®Ÿè£…å®Œäº†   |
| **ã‚³ãƒ¼ãƒ‰å“è³ª**   | ESLint/Ruff è­¦å‘Š                  | 0 warnings    |

---

## 3. ãƒ•ã‚§ãƒ¼ã‚ºé–“ä¾å­˜é–¢ä¿‚

```mermaid
graph TD
    P0[Phase 0: åŸºç›¤ & CI/CD] --> P1[Phase 1: API + DB + RAG âœ…]
    P1 --> P1_5[Phase 1.5: æœ¬ç•ªé‹ç”¨æº–å‚™ âœ…]
    P1_5 --> P2[Phase 2: UI + ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚° âœ…]
    P2 --> P3[Phase 3: RAG + AI Searchçµ±åˆ]
    P3 --> P4[Phase 4: Deep Research]
    P4 --> P5[Phase 5: UIæ”¹å–„ + ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†]

    style P0 fill:#e1f5fe
    style P1 fill:#c8e6c9
    style P1_5 fill:#c8e6c9
    style P2 fill:#c8e6c9
    style P3 fill:#fff3e0
    style P4 fill:#fce4ec
    style P5 fill:#f1f8e9
```

**ä¸¦è¡Œå®Ÿè£…å¯èƒ½æ€§**:
- Phase 2å®Œäº†å¾Œï¼šAzure AI Searchçµ±åˆï¼ˆPhase 3ï¼‰ã®é–‹ç™ºã«é›†ä¸­
- Phase 3å®Œäº†å¾Œï¼šDeep Researchï¼ˆPhase 4ï¼‰ã¨UIæ”¹å–„ï¼ˆPhase 5-Aï¼‰ã¯ä¸¦è¡Œé–‹ç™ºå¯èƒ½
- Phase 4å®Œäº†å¾Œï¼šã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†æ‹¡å¼µï¼ˆPhase 5-Bï¼‰ã¨E2Eãƒ†ã‚¹ãƒˆï¼ˆPhase 5-Cï¼‰ã¯ä¸¦è¡Œé–‹ç™ºå¯èƒ½

---

*Last updated: 2025-06-03*
